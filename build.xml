<?xml version="1.0"?>
<project name="JnctnDeployJitsiTask" default="ant-usage" basedir=".">
  <property name="build" value="build"/>
  <property name="classes" value="classes"/>
  <property name="src" value="src" />
  <property name="lib" value="lib/apache-ant-1.8.4/" />

  <target name="ant-usage"
          description="simply execute 'ant' to discover the most useful targets.">
    <echo message="Relevant ant commands to this project ..." />
    <echo message="'ant clean' to remove all files generated by this script" />
    <echo message="'ant compile' to compile source classes" />
    <echo message="'ant build' build the jar places it in build" />
    <echo message="'ant all' do it all; clean, then compile, then build" />
  </target>

  <!-- setup the class path -->
  <path id="compile.class.path">
    <pathelement location="${classes}"/>
    <fileset dir="${lib}">
      <include name="**/ant.jar"/>
    </fileset>
  </path>

  <!-- clean -->
  <target name="clean" description="Remove all generated files and prepare for a clean build.">
    <delete failonerror="false" includeemptydirs="true">
      <fileset dir="${classes}"/>
      <fileset dir="${build}" />
    </delete>
  </target>

  <!-- compile -->
  <target name="compile">
    <mkdir dir="${classes}"/>
    <mkdir dir="${build}"/>
    <javac classpathref="compile.class.path" debug="false"
           deprecation="true" destdir="${classes}" nowarn="false"
           source="1.6" target="1.6" memoryMaximumSize="400M"
           fork="true" includeantruntime="false">
      <src path="${src}"/>
      <include name="**/*.java" />
    </javac>
  </target>

  <!-- build the jar -->
  <target name="build">
    <jar destfile="${build}/deploy-jitsi.jar" basedir="${classes}"/>
  </target>

  <!-- this is what this deploy task looks like -->
  <!--
  <target name="deploy">
    <taskdef name="deploy"
            classpath="${build}/deploy-jitsi.jar"
            classname="com.jnctn.ant.DeployAppletTask" />
    <deploy releasepath="/var/www/vhhosts/" />
  </target>
  -->

  <target name="all" depends="clean, compile, build" />

</project>

